---
title: 基本引用类型
date: 2024-04-17
icon: reference
category:
  - JavaScript
tag:
  - language advanced
---

引用值（或者对象）是某个特定 **引用类型** 的实例。

新对象通过使用 `new` 操作符后跟一个构造函数（constructor）来创建。构造函数就是用来创建新对象的函数，比如下面这行代码：

```js
let now = new Date()
```

这行代码创建了引用类型 `Date` 的一个新实例，并将它保存在变量 `now` 中。`Date()` 在这里就是构造函数，它负责创建一个只有默认属性和方法的简单对象。

ECMAScript 提供了很多像 `Date` 这样的原生引用类型，帮助开发者实现常见的任务。

## `Date`

`Date` 类型将日期保存为自协调世界时（UTC，Universal Time Coordinated）时间 1970 年 1 月 1 日午夜（零时）至今所经过的毫秒数。

要创建日期对象，就使用 `new` 操作符来调用 `Date` 构造函数：

```js
let now = new Date()
```

在不给 `Date` 构造函数传参数的情况下，创建的对象将保存当前日期和时间。要基于其他日期和时间创建日期对象，必须传入其毫秒表示（UNIX 纪元 1970 年 1 月 1 日午夜之后的毫秒数）。

为了得到这个时间，可以使用两个辅助函数：

- `Date.parse()`
- `Date.UTC()`

### `Date.parse()` 和 `Date.UTC()`

#### `Date.parse()`

`Date.parse()` 方法接收一个表示日期的字符串参数，尝试将这个字符串转换为表示该日期的毫秒数（本地时间）。

支持下列日期格式：

- 「月/日/年」，如 `"5/23/2019"`；
- 「月名 日, 年」，如 `"May 23, 2019"`；
- 「周几 月名 日 年 时:分:秒 时区」，如 `"Tue May 23 2019 00:00:00 GMT-0700"`；
- ISO 8601 扩展格式「YYYY-MM-DDTHH:mm:ss.sssZ」，如 `"2019-05-23T00:00:00"`（只适用于兼容 ES5 的实现）。

如果传给 `Date.parse()` 的字符串并不表示日期，则该方法会返回 `NaN`。

如果直接把表示日期的字符串传给 `Date` 构造函数，那么 `Date` 会在后台调用 `Date.parse()`。

```js
let someDate1 = new Date('May 23, 2019')
let someDate2 = new Date(Date.parse('May 23, 2019'))
```

这两行代码得到的日期对象相同。

#### `Date.UTC()`

`Date.UTC()` 方法也返回日期的毫秒表示（UTC 时间），参数是「年、零起点月数（1 月是 0，2 月是 1，以此类推）、日（1 ~ 31）、时（0 ~ 23）、分、秒和毫秒」。

这些参数中，只有前两个（年和月）是必需的。如果不提供日，那么默认为 1 日。其他参数的默认值都是 0。

```js
// GMT 时间 2000 年 1 月 1 日零点
let y2k = new Date(Date.UTC(2000, 0)) // 2000-01-01T00:00:00.000Z
// GMT 时间 2005 年 5 月 5 日下午 5 点 55 分 55 秒
let allFives = new Date(Date.UTC(2005, 4, 5, 17, 55, 55)) // 2005-05-05T17:55:55.000Z
```

与 `Date.parse()` 一样，`Date.UTC()` 也会被 `Date` 构造函数隐式调用，但有一个区别：这种情况下创建的是本地日期，不是 `GMT` 日期。

```js
// 本地时间（北京）为：UTC + 8，因此会相差 8 * 60 * 60 * 1000 = 28800000
let time = new Date(Date.UTC(2000, 0)) - new Date(2000, 0) // 28800000
```

::: tip JS 中的时间

不同时间概念，详见 [GMT、UTC、时区、JavaScript Date 总结](https://juejin.cn/post/7063118893115670536)。

:::

#### 对比

`Date.UTC()` 日期指的是在没有时区偏差的情况下(将日期转换为 GMT 时间)的日期值。

`Date.parse()` 方法是基于本地时区建立的，而 `Date.UTC()` 方法是基于无时区偏差建立的。

所以如果我们对两个方法传入相同的时间，我们会发现 `Date.UTC()` 方法得到的毫秒数相对于 `Date.parse()` 方法得到的毫秒数会多八个小时的毫秒数(这里的本地时区指的是北京时间)。

